<!DOCTYPE html>
<html class="antialiased" lang="ko">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Jae's Briefing - ì™¸ì‹  ë¸Œë¦¬í•‘</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,typography"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Serif+KR:wght@400;700;900&family=Playfair+Display:ital,wght@0,400;0,700;0,900;1,400&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet"/>
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        primary: "#0f0f0f",
                        "background-light": "#ffffff",
                        "background-dark": "#0f0f0f",
                        "surface-light": "#f8f9fa",
                        "surface-dark": "#1a1a1a",
                        "border-light": "#e5e7eb",
                        "border-dark": "#2a2a2a",
                        "accent-red": "#dc2626",
                        "accent-blue": "#2563eb",
                        "accent-green": "#16a34a",
                        "accent-purple": "#7c3aed",
                        "accent-gold": "#f59e0b",
                    },
                    fontFamily: {
                        serif: ["'Noto Serif KR'", "'Playfair Display'", "serif"],
                        sans: ["'Inter'", "sans-serif"],
                    },
                },
            },
        };
    </script>
    <style>
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .line-clamp-2 { display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        .line-clamp-3 { display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; }
    </style>
</head>
<body class="bg-background-light dark:bg-background-dark text-gray-900 dark:text-gray-100 transition-colors duration-300 font-sans">

<!-- Header -->
<header class="bg-primary text-white sticky top-0 z-50 shadow-md">
    <div class="container mx-auto px-4 h-14 flex items-center justify-between">
        <div class="flex items-center gap-6">
            <a class="text-2xl font-serif font-black tracking-tight" href="index.html">
                <span class="text-white">Jae's</span>
                <span class="text-gray-400 italic">Briefing</span>
            </a>
            <nav class="hidden lg:flex items-center gap-5 text-sm font-medium ml-8 border-l border-gray-700 pl-8 h-8">
                <a class="hover:text-gray-300 transition" href="index.html">í™ˆ</a>
                <a class="hover:text-gray-300 transition" href="archive.html">ì•„ì¹´ì´ë¸Œ</a>
                <a class="hover:text-gray-300 transition" href="about.html">ì†Œê°œ</a>
            </nav>
        </div>
        <div class="flex items-center gap-3">
            <button class="text-white hover:text-gray-300 transition" onclick="toggleDarkMode()" title="ë‹¤í¬ëª¨ë“œ í† ê¸€">
                <span class="material-icons-outlined text-xl">dark_mode</span>
            </button>
            <a href="https://github.com/hong4137/briefing" target="_blank" class="text-white hover:text-gray-300 transition">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
            </a>
        </div>
    </div>
</header>

<!-- Sub Navigation - Topics Bar -->
<div class="bg-surface-dark dark:bg-black text-gray-300 text-xs font-medium border-b border-gray-800">
    <div class="container mx-auto px-4 py-2 overflow-x-auto no-scrollbar whitespace-nowrap flex items-center gap-6">
        <a class="flex items-center gap-2 hover:text-white transition group" href="#">
            <span class="material-icons-outlined text-sm text-accent-red">local_fire_department</span>
            <span>AI / ë°˜ë„ì²´</span>
        </a>
        <div class="w-px h-4 bg-gray-700"></div>
        <a class="flex items-center gap-2 hover:text-white transition group" href="#">
            <span class="material-icons-outlined text-sm text-accent-blue">trending_up</span>
            <span>ë¹…í…Œí¬ / ìŠ¤íƒ€íŠ¸ì—…</span>
        </a>
        <div class="w-px h-4 bg-gray-700"></div>
        <a class="flex items-center gap-2 hover:text-white transition group" href="#">
            <span class="material-icons-outlined text-sm text-accent-green">account_balance</span>
            <span>ê²½ì œ / ê¸ˆìœµ</span>
        </a>
        <div class="w-px h-4 bg-gray-700"></div>
        <a class="flex items-center gap-2 hover:text-white transition group" href="#">
            <span class="material-icons-outlined text-sm text-accent-purple">public</span>
            <span>ë¯¸ì¤‘ ê¸°ìˆ íŒ¨ê¶Œ</span>
        </a>
    </div>
</div>

<main class="container mx-auto px-4 py-8">
    <!-- Loading State -->
    <div id="loading" class="text-center py-20">
        <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 dark:border-white mx-auto mb-4"></div>
        <p class="text-gray-500">ë¸Œë¦¬í•‘ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
    </div>

    <!-- Main Content Grid -->
    <div id="content" class="hidden">
        <!-- Hero Section: ìµœì‹  ë¸Œë¦¬í•‘ -->
        <section class="mb-12">
            <!-- ë‚ ì§œ ë° ë¸Œë¦¬í•‘ ì •ë³´ í—¤ë” -->
            <div id="briefing-header" class="mb-6">
                <!-- JSë¡œ ì±„ì›Œì§ -->
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 border-b border-border-light dark:border-border-dark pb-12">
                <!-- ì¢Œì¸¡: TOP í—¤ë“œë¼ì¸ (í° ì˜ì—­) -->
                <div id="top-headlines" class="lg:col-span-6">
                    <!-- JSë¡œ ì±„ì›Œì§ -->
                </div>

                <!-- ì¤‘ê°„: ì¼ë°˜ ê¸°ì‚¬ë“¤ -->
                <div id="regular-articles" class="lg:col-span-4 flex flex-col gap-5 lg:border-l lg:border-r border-border-light dark:border-border-dark lg:px-6">
                    <!-- JSë¡œ ì±„ì›Œì§ -->
                </div>

                <!-- ìš°ì¸¡: íŠ¹ë³„íŒ ì„¹ì…˜ -->
                <div class="lg:col-span-2">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="font-bold uppercase tracking-widest text-xs text-gray-500 dark:text-gray-400">íŠ¹ë³„íŒ</h3>
                    </div>
                    <div id="special-sidebar" class="space-y-4">
                        <!-- JSë¡œ ì±„ì›Œì§ -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Recent Briefings Section -->
        <section class="mb-16">
            <div class="flex items-center justify-between mb-6 border-b border-black dark:border-white pb-2">
                <h2 class="text-xl font-serif font-black text-black dark:text-white">ì§€ë‚œ ë¸Œë¦¬í•‘</h2>
                <a class="text-xs font-bold uppercase tracking-wider hover:text-gray-600 dark:hover:text-gray-300 transition" href="archive.html">ì „ì²´ ë³´ê¸° â†’</a>
            </div>
            <div id="recent-briefings" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                <!-- JSë¡œ ì±„ì›Œì§ -->
            </div>
        </section>
    </div>
</main>

<!-- Footer -->
<footer class="bg-[#121212] text-white py-10 border-t border-gray-800 mt-12">
    <div class="container mx-auto px-4">
        <div class="flex flex-col md:flex-row justify-between items-start gap-8">
            <div class="max-w-sm">
                <a class="text-xl font-serif font-black mb-3 block" href="#">
                    <span class="text-white">Jae's</span>
                    <span class="text-gray-500 italic">Briefing</span>
                </a>
                <p class="text-gray-400 text-sm leading-relaxed">
                    TechCrunch, CNBC, Bloomberg, Reuters ë“± ì£¼ìš” ì™¸ì‹ ì—ì„œ ë§¤ì¼ ì—„ì„ í•œ AI/ê¸°ìˆ , ê²½ì œ, ë°˜ë„ì²´ ë‰´ìŠ¤ë¥¼ Value Score ê¸°ë°˜ìœ¼ë¡œ íë ˆì´ì…˜í•©ë‹ˆë‹¤.
                </p>
            </div>
            <div class="flex gap-12 text-sm">
                <div class="flex flex-col gap-2">
                    <span class="font-bold text-gray-500 uppercase tracking-wider mb-2 text-xs">Links</span>
                    <a class="text-gray-300 hover:text-white transition" href="archive.html">ì•„ì¹´ì´ë¸Œ</a>
                    <a class="text-gray-300 hover:text-white transition" href="about.html">ì†Œê°œ</a>
                    <a class="text-gray-300 hover:text-white transition" href="https://github.com/hong4137/briefing" target="_blank">GitHub</a>
                </div>
                <div class="flex flex-col gap-2">
                    <span class="font-bold text-gray-500 uppercase tracking-wider mb-2 text-xs">Sources</span>
                    <span class="text-gray-400">TechCrunch</span>
                    <span class="text-gray-400">CNBC</span>
                    <span class="text-gray-400">Reuters</span>
                </div>
            </div>
        </div>
        <div class="border-t border-gray-800 mt-10 pt-6 flex flex-col md:flex-row justify-between items-center text-xs text-gray-500">
            <p>Â© 2026 Jae's Briefing. Curated by Claude with â™¥</p>
            <p class="mt-2 md:mt-0">Value Score ê¸°ë°˜ ë‰´ìŠ¤ íë ˆì´ì…˜ ì‹œìŠ¤í…œ</p>
        </div>
    </div>
</footer>

<script>
    // ë‹¤í¬ëª¨ë“œ ì´ˆê¸°í™” ë° í† ê¸€
    function initDarkMode() {
        if (localStorage.getItem('darkMode') === 'true' || 
            (!localStorage.getItem('darkMode') && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
        }
    }
    
    function toggleDarkMode() {
        document.documentElement.classList.toggle('dark');
        localStorage.setItem('darkMode', document.documentElement.classList.contains('dark'));
    }
    
    initDarkMode();

    // ìš”ì¼ í•œê¸€ ë³€í™˜
    const dayNames = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '];
    
    function formatDate(dateStr) {
        if (dateStr.includes('special')) return 'íŠ¹ë³„íŒ';
        if (dateStr.includes('weekly')) return 'ì£¼ê°„';
        const date = new Date(dateStr);
        const month = date.getMonth() + 1;
        const day = date.getDate();
        const dayName = dayNames[date.getDay()];
        return `${month}ì›” ${day}ì¼ (${dayName})`;
    }

    function formatShortDate(dateStr) {
        if (dateStr.includes('special')) return 'íŠ¹ë³„íŒ';
        if (dateStr.includes('weekly')) return 'ì£¼ê°„';
        const date = new Date(dateStr);
        return `${date.getMonth() + 1}/${date.getDate()}`;
    }

    // ë°ì´í„° ë¡œë“œ ë° ë Œë”ë§
    async function loadBriefings() {
        try {
            const response = await fetch('briefings.json');
            const data = await response.json();
            renderContent(data.briefings);
        } catch (error) {
            console.error('Failed to load briefings:', error);
            document.getElementById('loading').innerHTML = `
                <p class="text-red-500">ë¸Œë¦¬í•‘ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.</p>
                <p class="text-gray-500 text-sm mt-2">ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.</p>
            `;
        }
    }

    function renderContent(briefings) {
        // ì¼ê°„ ë¸Œë¦¬í•‘ê³¼ íŠ¹ë³„íŒ ë¶„ë¦¬
        const dailyBriefings = briefings.filter(b => !b.date.includes('special') && !b.date.includes('weekly'));
        const specialEditions = briefings.filter(b => b.date.includes('special') || b.date.includes('weekly'));

        // ìµœì‹  ë¸Œë¦¬í•‘
        const latest = dailyBriefings[0];
        const highlights = getHighlights(latest);
        
        // TOP ê¸°ì‚¬ì™€ ì¼ë°˜ ê¸°ì‚¬ ë¶„ë¦¬
        const topArticles = highlights.filter(h => h.category === 'top');
        const regularArticles = highlights.filter(h => h.category !== 'top');
        // ë§Œì•½ categoryê°€ ì—†ìœ¼ë©´ ì²˜ìŒ 3ê°œë¥¼ TOPìœ¼ë¡œ
        const displayTopArticles = topArticles.length > 0 ? topArticles : highlights.slice(0, 3);
        const displayRegularArticles = topArticles.length > 0 ? regularArticles : highlights.slice(3);

        // ë¸Œë¦¬í•‘ í—¤ë”
        document.getElementById('briefing-header').innerHTML = `
            <div class="flex items-center gap-3 mb-2">
                <span class="inline-flex items-center gap-1.5 bg-accent-red text-white text-xs font-bold px-2.5 py-1 rounded">
                    <span class="material-icons-outlined text-sm">local_fire_department</span>
                    ìµœì‹  ë¸Œë¦¬í•‘
                </span>
                <span class="text-gray-500 dark:text-gray-400 text-sm font-medium">${formatDate(latest.date)}</span>
                <span class="text-gray-400 text-sm">â€¢</span>
                <span class="text-gray-500 dark:text-gray-400 text-sm">${latest.stats?.articles || 0}ê°œ ê¸°ì‚¬</span>
                <span class="text-gray-400 text-sm">â€¢</span>
                <span class="text-gray-500 dark:text-gray-400 text-sm">${latest.stats?.sections || 0}ê°œ ì„¹ì…˜</span>
                ${latest.stats?.picks ? `
                <span class="text-gray-400 text-sm">â€¢</span>
                <span class="text-accent-gold text-sm font-medium">ğŸ’ ${latest.stats.picks} Pick</span>
                ` : ''}
            </div>
            <a href="${latest.date}.html" class="block group">
                <h1 class="text-2xl lg:text-3xl font-serif font-bold text-gray-900 dark:text-white leading-tight group-hover:text-gray-600 dark:group-hover:text-gray-300 transition">
                    ${latest.title}
                </h1>
            </a>
            <p class="text-gray-600 dark:text-gray-400 mt-3 text-base leading-relaxed max-w-4xl">
                ${latest.summary}
            </p>
        `;

        // ì¢Œì¸¡: TOP í—¤ë“œë¼ì¸
        document.getElementById('top-headlines').innerHTML = `
            <div class="space-y-6">
                ${displayTopArticles.map((article, idx) => `
                    <article class="group ${idx > 0 ? 'pt-6 border-t border-border-light dark:border-border-dark' : ''}">
                        <a href="${article.url || latest.date + '.html'}" target="${article.url ? '_blank' : '_self'}" class="block">
                            <div class="flex items-center gap-2 mb-2">
                                <span class="inline-flex items-center gap-1 bg-accent-red/10 text-accent-red text-xs font-bold px-2 py-0.5 rounded">
                                    ğŸ”¥ TOP
                                </span>
                            </div>
                            <h2 class="text-xl font-serif font-bold leading-snug mb-2 group-hover:text-gray-600 dark:group-hover:text-gray-300 transition">
                                ${article.title}
                            </h2>
                            ${article.summary ? `
                            <p class="text-gray-500 dark:text-gray-400 text-sm leading-relaxed line-clamp-2">
                                ${article.summary}
                            </p>
                            ` : ''}
                        </a>
                    </article>
                `).join('')}
            </div>
        `;

        // ì¤‘ê°„: ì¼ë°˜ ê¸°ì‚¬ë“¤
        const allRegularArticles = displayRegularArticles.length > 0 ? displayRegularArticles : highlights.slice(3);
        document.getElementById('regular-articles').innerHTML = `
            <h3 class="font-bold uppercase tracking-widest text-xs text-gray-500 dark:text-gray-400 mb-4">More Headlines</h3>
            ${allRegularArticles.slice(0, 5).map(article => `
                <article class="group pb-4 border-b border-border-light dark:border-border-dark last:border-0">
                    <a href="${article.url || latest.date + '.html'}" target="${article.url ? '_blank' : '_self'}" class="block">
                        <h4 class="font-medium text-sm leading-snug group-hover:text-gray-600 dark:group-hover:text-gray-300 transition line-clamp-2">
                            ${article.title}
                        </h4>
                        ${article.category === 'pick' ? `
                        <span class="inline-flex items-center gap-1 text-accent-gold text-xs mt-1">
                            ğŸ’ Claude's Pick
                        </span>
                        ` : ''}
                    </a>
                </article>
            `).join('')}
            <a href="${latest.date}.html" class="inline-flex items-center gap-1 text-sm font-medium text-accent-blue hover:underline mt-2">
                ë¸Œë¦¬í•‘ ì „ì²´ ë³´ê¸°
                <span class="material-icons-outlined text-sm">arrow_forward</span>
            </a>
        `;

        // ìš°ì¸¡: íŠ¹ë³„íŒ ì‚¬ì´ë“œë°”
        document.getElementById('special-sidebar').innerHTML = specialEditions.length > 0 ? 
            specialEditions.map(edition => {
                const isWeekly = edition.date.includes('weekly');
                const icon = isWeekly ? 'date_range' : 'star';
                const label = isWeekly ? 'ì£¼ê°„' : 'íŠ¹ë³„íŒ';
                const colorClass = isWeekly ? 'text-accent-blue' : 'text-accent-gold';
                
                return `
                    <a href="${edition.date}.html" class="block group">
                        <div class="p-3 rounded-lg bg-surface-light dark:bg-surface-dark group-hover:bg-gray-100 dark:group-hover:bg-gray-800 transition">
                            <div class="flex items-center gap-2 mb-2">
                                <span class="material-icons-outlined text-sm ${colorClass}">${icon}</span>
                                <span class="text-[10px] font-bold uppercase tracking-wider ${colorClass}">${label}</span>
                            </div>
                            <h4 class="text-sm font-bold leading-snug line-clamp-2 group-hover:text-gray-600 dark:group-hover:text-gray-300 transition">
                                ${edition.title.split(':')[0]}
                            </h4>
                        </div>
                    </a>
                `;
            }).join('') : `
            <p class="text-xs text-gray-400">íŠ¹ë³„íŒì´ ì—†ìŠµë‹ˆë‹¤.</p>
        `;

        // ì§€ë‚œ ë¸Œë¦¬í•‘ (ìµœì‹  ì œì™¸ 8ê°œ)
        const recentBriefings = dailyBriefings.slice(1, 9);
        document.getElementById('recent-briefings').innerHTML = recentBriefings.map(briefing => {
            const briefingHighlights = getHighlights(briefing);
            const topHighlight = briefingHighlights.find(h => h.category === 'top') || briefingHighlights[0];
            
            return `
                <article class="group cursor-pointer">
                    <a href="${briefing.date}.html" class="block">
                        <div class="flex items-center gap-2 mb-2">
                            <span class="text-xs font-medium text-gray-500 dark:text-gray-400">${formatDate(briefing.date)}</span>
                            ${briefing.stats?.picks ? `<span class="text-accent-gold text-xs">ğŸ’ ${briefing.stats.picks}</span>` : ''}
                        </div>
                        <h4 class="font-serif text-base font-bold leading-snug mb-2 group-hover:text-gray-600 dark:group-hover:text-gray-300 transition line-clamp-2">
                            ${topHighlight?.title || briefing.title.split('|')[0].trim()}
                        </h4>
                        <p class="text-sm text-gray-500 dark:text-gray-400 line-clamp-2">
                            ${topHighlight?.summary || briefing.summary.substring(0, 60)}...
                        </p>
                        <div class="mt-2 text-xs text-gray-400">
                            ${briefing.stats?.articles || 0}ê°œ ê¸°ì‚¬
                        </div>
                    </a>
                </article>
            `;
        }).join('');

        // Show content, hide loading
        document.getElementById('loading').classList.add('hidden');
        document.getElementById('content').classList.remove('hidden');
    }

    // Helper functions
    function getHighlights(briefing) {
        if (!briefing.highlights) return [];
        return briefing.highlights.map(h => {
            if (typeof h === 'string') {
                return { title: h, summary: '', category: null, url: null };
            }
            return h;
        });
    }

    function truncate(str, len) {
        if (!str) return '';
        return str.length > len ? str.substring(0, len) + '...' : str;
    }

    // Load on page ready
    document.addEventListener('DOMContentLoaded', loadBriefings);
</script>

</body>
</html>
